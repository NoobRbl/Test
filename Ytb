--// SAB Hub (Compact) FULL v5.0 - COMPLETE WITH ALL FEATURES
--// - Remote calls for Execute Selected & Execute All
--// - Script loaders for all main functions
--// - Clean, modern dark purple theme

local Players = game:GetService("Players")
local LP = Players.LocalPlayer
local Workspace = game:GetService("Workspace")
local Lighting = game:GetService("Lighting")
local RunService = game:GetService("RunService")

-- Original file services
local RS = game:GetService("ReplicatedStorage")

--=========================
-- Safe parent (executor-friendly)
--=========================
local function getSafeParent()
    if typeof(gethui) == "function" then
        local ok, res = pcall(gethui)
        if ok and res then return res end
    end
    local ok, pg = pcall(function()
        return LP:WaitForChild("PlayerGui")
    end)
    if ok and pg then return pg end
    return game:GetService("CoreGui")
end

-- Remove old GUIs
pcall(function() game:GetService("CoreGui"):FindFirstChild("SABPanel"):Destroy() end)
pcall(function()
    local pg = LP:FindFirstChild("PlayerGui")
    if pg then pg:FindFirstChild("SABPanel"):Destroy() end
end)
pcall(function()
    if typeof(gethui) == "function" then
        local h = gethui()
        if h and h:FindFirstChild("SABPanel") then h.SABPanel:Destroy() end
    end
end)

-- Remove old admin panel
pcall(function()
    if game:GetService("CoreGui"):FindFirstChild("Admin Panel Sab") then
        game:GetService("CoreGui")["Admin Panel Sab"]:Destroy()
    end
end)

--=========================
-- Theme
--=========================
local CFG = {
    Title = "üß† AstraOnTop",
    ToggleText = "üß†",
    Accent = Color3.fromRGB(140, 60, 255),

    BG = Color3.fromRGB(16, 16, 20),
    Card = Color3.fromRGB(22, 22, 28),
    Card2 = Color3.fromRGB(28, 28, 36),

    Txt = Color3.fromRGB(240, 240, 245),
    SubTxt = Color3.fromRGB(160, 160, 175),

    Stroke = Color3.fromRGB(255, 255, 255),
    StrokeAlpha = 0.86,
}

local function round(ui, px)
    local c = Instance.new("UICorner")
    c.CornerRadius = UDim.new(0, px)
    c.Parent = ui
    return c
end

local function stroke(ui, thickness, transparency)
    local s = Instance.new("UIStroke")
    s.Thickness = thickness or 1
    s.Color = CFG.Stroke
    s.Transparency = transparency ~= nil and transparency or CFG.StrokeAlpha
    s.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
    s.Parent = ui
    return s
end

local function padding(ui, l, r, t, b)
    local p = Instance.new("UIPadding")
    p.PaddingLeft = UDim.new(0, l or 0)
    p.PaddingRight = UDim.new(0, r or 0)
    p.PaddingTop = UDim.new(0, t or 0)
    p.PaddingBottom = UDim.new(0, b or 0)
    p.Parent = ui
    return p
end

-- Simple button with hover effect
local function makeButton(parent, text, z)
    local b = Instance.new("TextButton")
    b.AutoButtonColor = false
    b.Text = text
    b.Font = Enum.Font.GothamSemibold
    b.TextSize = 13
    b.TextColor3 = CFG.Txt
    b.BackgroundColor3 = CFG.Card2
    b.Parent = parent
    b.ZIndex = z or (parent.ZIndex + 1)

    round(b, 12)
    stroke(b, 1, 0.88)

    -- Simple hover effect without animation
    b.MouseEnter:Connect(function()
        b.BackgroundColor3 = Color3.fromRGB(34, 34, 44)
    end)
    b.MouseLeave:Connect(function()
        b.BackgroundColor3 = CFG.Card2
    end)

    return b
end

--=========================
-- GUI root
--=========================
local gui = Instance.new("ScreenGui")
gui.Name = "SABPanel"
gui.ResetOnSpawn = false
gui.IgnoreGuiInset = true
gui.DisplayOrder = 9999
gui.Enabled = true
gui.ZIndexBehavior = Enum.ZIndexBehavior.Global
gui.Parent = getSafeParent()

-- Toggle floating button v·ªõi h√¨nh ·∫£nh
local toggle = Instance.new("ImageButton")
toggle.Name = "Toggle"
toggle.AutoButtonColor = false
toggle.Size = UDim2.new(0, 52, 0, 52)
toggle.Position = UDim2.new(0, 18, 1, -90)
toggle.BackgroundColor3 = CFG.Card2
toggle.BackgroundTransparency = 0.1
toggle.Image = "rbxassetid://98958595520364"
toggle.ScaleType = Enum.ScaleType.Fit
toggle.Parent = gui
toggle.Active = true
toggle.Draggable = true
toggle.Visible = true
toggle.ZIndex = 500

-- Bo g√≥c 15px
local toggleCorner = Instance.new("UICorner")
toggleCorner.CornerRadius = UDim.new(0, 15)
toggleCorner.Parent = toggle

-- Vi·ªÅn t√≠m ch·∫°y xung quanh toggle
local ring = Instance.new("UIStroke")
ring.Thickness = 2
ring.Color = CFG.Accent
ring.Transparency = 0.15
ring.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
ring.Parent = toggle

-- Th√™m hi·ªáu ·ª©ng hover cho toggle
toggle.MouseEnter:Connect(function()
    toggle.BackgroundColor3 = Color3.fromRGB(44, 44, 60)
    ring.Transparency = 0.05 -- Vi·ªÅn s√°ng h∆°n khi hover
end)

toggle.MouseLeave:Connect(function()
    toggle.BackgroundColor3 = CFG.Card2
    ring.Transparency = 0.15 -- Tr·ªü l·∫°i b√¨nh th∆∞·ªùng
end)

-- Main panel
local main = Instance.new("Frame")
main.Name = "Main"
main.Size = UDim2.new(0, 360, 0, 320)
main.Position = UDim2.new(0.5, -180, 0.5, -160)
main.BackgroundColor3 = CFG.BG
main.Visible = false
main.Active = true
main.Draggable = true
main.Parent = gui
main.ZIndex = 600
round(main, 16)
stroke(main, 1, 0.78)

-- Topbar
local top = Instance.new("Frame")
top.Name = "Topbar"
top.Size = UDim2.new(1, 0, 0, 42)
top.BackgroundColor3 = CFG.Card
top.Parent = main
top.ZIndex = 610
round(top, 16)
stroke(top, 1, 0.90)
padding(top, 12, 12, 0, 0)

local title = Instance.new("TextLabel")
title.BackgroundTransparency = 1
title.Size = UDim2.new(1, -70, 1, 0)
title.TextXAlignment = Enum.TextXAlignment.Left
title.Text = CFG.Title
title.Font = Enum.Font.GothamBold
title.TextSize = 14
title.TextColor3 = CFG.Txt
title.Parent = top
title.ZIndex = 620

local closeBtn = Instance.new("TextButton")
closeBtn.AutoButtonColor = false
closeBtn.Size = UDim2.new(0, 34, 0, 28)
closeBtn.Position = UDim2.new(1, -40, 0.5, -14)
closeBtn.BackgroundColor3 = Color3.fromRGB(40, 40, 52)
closeBtn.Text = "‚úï"
closeBtn.Font = Enum.Font.GothamBold
closeBtn.TextSize = 14
closeBtn.TextColor3 = CFG.Txt
closeBtn.Parent = top
closeBtn.ZIndex = 620
round(closeBtn, 10)
stroke(closeBtn, 1, 0.88)

-- Body
local body = Instance.new("Frame")
body.BackgroundTransparency = 1
body.Size = UDim2.new(1, 0, 1, -42)
body.Position = UDim2.new(0, 0, 0, 42)
body.Parent = main
body.ZIndex = 610

-- Tabs row
local tabs = Instance.new("Frame")
tabs.Size = UDim2.new(1, 0, 0, 38)
tabs.BackgroundTransparency = 1
tabs.Parent = body
tabs.ZIndex = 620
padding(tabs, 12, 12, 8, 0)

local tabList = Instance.new("UIListLayout")
tabList.FillDirection = Enum.FillDirection.Horizontal
tabList.Padding = UDim.new(0, 8)
tabList.Parent = tabs

local function makeTab(name, text)
    local b = Instance.new("TextButton")
    b.Name = name
    b.AutoButtonColor = false
    b.Size = UDim2.new(0, 104, 0, 28)
    b.BackgroundColor3 = CFG.Card2
    b.Text = text
    b.Font = Enum.Font.GothamSemibold
    b.TextSize = 12
    b.TextColor3 = CFG.SubTxt
    b.Parent = tabs
    b.ZIndex = 630
    round(b, 10)
    stroke(b, 1, 0.90)
    
    b.MouseEnter:Connect(function()
        b.BackgroundColor3 = Color3.fromRGB(34, 34, 44)
    end)
    b.MouseLeave:Connect(function()
        b.BackgroundColor3 = CFG.Card2
    end)
    
    return b
end

local tabMain = makeTab("TabMain", "Main")
local tabEvents = makeTab("TabEvents", "Event")
local tabMisc = makeTab("TabMisc", "Misc")

-- Pages container
local pages = Instance.new("Frame")
pages.BackgroundTransparency = 1
pages.Size = UDim2.new(1, 0, 1, -38)
pages.Position = UDim2.new(0, 0, 0, 38)
pages.Parent = body
pages.ZIndex = 620
padding(pages, 12, 12, 8, 12)

local function makePage(name)
    local p = Instance.new("Frame")
    p.Name = name
    p.BackgroundTransparency = 1
    p.Size = UDim2.new(1, 0, 1, 0)
    p.Visible = false
    p.Parent = pages
    p.ZIndex = 630
    return p
end

local pageMain = makePage("PageMain")
local pageEvents = makePage("PageEvents")
local pageMisc = makePage("PageMisc")

-- Dropdown overlay ref
local listFrame

local function activateTab(tabBtn, page)
    for _, child in ipairs(tabs:GetChildren()) do
        if child:IsA("TextButton") then
            child.BackgroundColor3 = CFG.Card2
            child.TextColor3 = CFG.SubTxt
        end
    end
    for _, p in ipairs(pages:GetChildren()) do
        if p:IsA("Frame") then p.Visible = false end
    end

    tabBtn.BackgroundColor3 = Color3.fromRGB(44, 44, 60)
    tabBtn.TextColor3 = CFG.Txt
    page.Visible = true
end

--=========================
-- MAIN TAB (ƒê√É C·∫¨P NH·∫¨T T√äN N√öT)
--=========================
local mainLabel = Instance.new("TextLabel")
mainLabel.BackgroundTransparency = 1
mainLabel.Size = UDim2.new(1, 0, 0, 22)
mainLabel.TextXAlignment = Enum.TextXAlignment.Left
mainLabel.Text = "Admin Command"
mainLabel.Font = Enum.Font.GothamSemibold
mainLabel.TextSize = 12
mainLabel.TextColor3 = CFG.SubTxt
mainLabel.Parent = pageMain
mainLabel.ZIndex = 640

local mainGrid = Instance.new("Frame")
mainGrid.BackgroundTransparency = 1
mainGrid.Size = UDim2.new(1, 0, 1, -28)
mainGrid.Position = UDim2.new(0, 0, 0, 28)
mainGrid.Parent = pageMain
mainGrid.ZIndex = 640

local grid = Instance.new("UIGridLayout")
grid.CellSize = UDim2.new(0.5, -6, 0, 44)
grid.CellPadding = UDim2.new(0, 12, 0, 12)
grid.Parent = mainGrid

-- Simple buttons with basic functionality
local btnBrainrotSpawner = makeButton(mainGrid, "üß¨ Brainrot Spawner", 650)
btnBrainrotSpawner.Size = UDim2.new(0.5, -6, 0, 44)

local btnLuckyBlock = makeButton(mainGrid, "üåßÔ∏è Rainy Lucky Block", 650)
btnLuckyBlock.Size = UDim2.new(0.5, -6, 0, 44)

local btnAddBrainrot = makeButton(mainGrid, "‚ûï Add Brainrot", 650)
btnAddBrainrot.Size = UDim2.new(0.5, -6, 0, 44)

local btnStealer = makeButton(mainGrid, "üçÄ Admin's Luck", 650)
btnStealer.Size = UDim2.new(0.5, -6, 0, 44)

local btnAutoMoreira = makeButton(mainGrid, "‚öôÔ∏è Auto Moreira Method", 650)
btnAutoMoreira.Size = UDim2.new(0.5, -6, 0, 44)

local btnDuplicate = makeButton(mainGrid, "üåÄ Duplicate", 650)
btnDuplicate.Size = UDim2.new(0.5, -6, 0, 44)

--=========================
-- EVENT TAB (SINGLE-SELECT like file)
--=========================
local selectedEvents = {}
local optButtons = {}

-- Danh s√°ch events ƒë·ªÉ hi·ªÉn th·ªã trong dropdown
local EVENT_LIST_DISPLAY = {
    "All", "Witching Hour", "Radioactive", "10B Visits", "North Pole", "Fuse Machine Luck",
    "Sammyni Spyderini", "Phase 4: Mygame43", "FatSammy", "Fishing", "Glitch", "Graveyard",
    "Bombardiro Crocodilo", "Meowl", "Nyan Cats", "Festive Lucky Block", "Concert", "Strawberry",
    "Phase 1: Sleepy", "Rain", "Trick or Treat", "Solar Flare", "1x1x1x1", "3 Roads", "Galaxy",
    "Tung Tung Attack", "Karkerkar Kurkur", "Raining Tacos", "Water", "YinYang", "UFO",
    "Dul Dul Dul", "Snow", "Phase 3: Sammy's Base", "Chicleteira Bicicleteira", "Speed",
    "Indonesia", "Molten", "Mexico", "Crab Rave", "Bubblegum", "Rap Concert", "Bloodmoon",
    "Matteo", "Phase 2: Galaxy Introduction", "Los Matteos", "Extinct", "4th of July",
    "Brazil", "Starfall", "La Vacca Saturno Saturnita", "Candy", "Rainbow"
}

-- Danh s√°ch events cho Execute All Event (kh√¥ng c√≥ Trick or Treat, Extinct, Karkerkar Kurkur, Festive Lucky Block)
local EVENT_LIST_EXECUTE_ALL = {
    "Witching Hour", "Radioactive", "10B Visits", "North Pole", "Fuse Machine Luck",
    "Sammyni Spyderini", "Phase 4: Mygame43", "FatSammy", "Fishing", "Glitch", "Graveyard",
    "Bombardiro Crocodilo", "Meowl", "Nyan Cats", "Concert", "Strawberry",
    "Phase 1: Sleepy", "Rain", "Solar Flare", "1x1x1x1", "3 Roads", "Galaxy",
    "Tung Tung Attack", "Raining Tacos", "Water", "YinYang", "UFO",
    "Dul Dul Dul", "Snow", "Phase 3: Sammy's Base", "Chicleteira Bicicleteira", "Speed",
    "Indonesia", "Molten", "Mexico", "Crab Rave", "Bubblegum", "Rap Concert", "Bloodmoon",
    "Matteo", "Phase 2: Galaxy Introduction", "Los Matteos", "4th of July",
    "Brazil", "Starfall", "La Vacca Saturno Saturnita", "Candy", "Rainbow"
}
local ddButton -- FIX: forward declare ƒë·ªÉ refreshDropdownText b·∫Øt ƒë√∫ng ddButton
local function refreshDropdownText()
    local selectedCount = 0
    for evName, isSelected in pairs(selectedEvents) do
        if evName ~= "All" and isSelected then
            selectedCount = selectedCount + 1
        end
    end

    if selectedCount == 0 then
        ddButton.Text = "Selected event (0)   ‚ñº"
    elseif selectedEvents["All"] then
        ddButton.Text = "Selected event (" .. (#EVENT_LIST_DISPLAY - 1) .. ")   ‚ñº"
    else
        ddButton.Text = "Selected event (" .. selectedCount .. ")   ‚ñº"
    end
end
local function setOptVisual(optBtn, name)
    if selectedEvents[name] then
        optBtn.Text = "  ‚úì " .. name
        optBtn.BackgroundColor3 = Color3.fromRGB(44, 44, 60)
    else
        optBtn.Text = "  " .. name
        optBtn.BackgroundColor3 = CFG.Card2
    end
end

local function updateAllSelection()
    local allSelected = true
    for _, evt in ipairs(EVENT_LIST_DISPLAY) do
        if evt ~= "All" and not selectedEvents[evt] then
            allSelected = false
            break
        end
    end
    selectedEvents["All"] = allSelected
end

local ddWrap = Instance.new("Frame")
ddWrap.Size = UDim2.new(1, 0, 0, 36)
ddWrap.BackgroundColor3 = CFG.Card2
ddWrap.Parent = pageEvents
ddWrap.ZIndex = 640
round(ddWrap, 12)
stroke(ddWrap, 1, 0.90)
padding(ddWrap, 10, 10, 0, 0)

local ddButton = Instance.new("TextButton") -- FIX: b·ªè local v√¨ ƒë√£ declare ·ªü tr√™n
ddButton.AutoButtonColor = false
ddButton.BackgroundTransparency = 1
ddButton.Size = UDim2.new(1, 0, 1, 0)
ddButton.TextXAlignment = Enum.TextXAlignment.Left
ddButton.Font = Enum.Font.Gotham
ddButton.TextSize = 13
ddButton.TextColor3 = CFG.Txt
ddButton.Parent = ddWrap
ddButton.ZIndex = 650
ddButton.Text = "Selected events (0)   ‚ñº"

listFrame = Instance.new("Frame")
listFrame.Visible = false
listFrame.BackgroundColor3 = CFG.Card
listFrame.Size = UDim2.new(1, 0, 0, 250)
listFrame.Position = UDim2.new(0, 0, 0, 42)
listFrame.Parent = pageEvents
listFrame.ZIndex = 700
round(listFrame, 12)
stroke(listFrame, 1, 0.90)
padding(listFrame, 8, 8, 8, 8)

local scroll = Instance.new("ScrollingFrame")
scroll.BackgroundTransparency = 1
scroll.Size = UDim2.new(1, 0, 1, 0)
scroll.AutomaticCanvasSize = Enum.AutomaticSize.Y
scroll.CanvasSize = UDim2.new(0, 0, 0, 0)
scroll.ScrollBarThickness = 3
scroll.Parent = listFrame
scroll.ZIndex = 710

local ll = Instance.new("UIListLayout")
ll.Padding = UDim.new(0, 6)
ll.Parent = scroll

-- Initialize all events as not selected
for _, name in ipairs(EVENT_LIST_DISPLAY) do
    selectedEvents[name] = false
end

for _, name in ipairs(EVENT_LIST_DISPLAY) do
    local opt = Instance.new("TextButton")
    opt.AutoButtonColor = false
    opt.Size = UDim2.new(1, 0, 0, 32)
    opt.BackgroundColor3 = CFG.Card2
    opt.TextXAlignment = Enum.TextXAlignment.Left
    opt.Font = Enum.Font.Gotham
    opt.TextSize = 13
    opt.TextColor3 = CFG.Txt
    opt.Parent = scroll
    opt.ZIndex = 720
    round(opt, 10)
    stroke(opt, 1, 0.92)

    optButtons[name] = opt
    setOptVisual(opt, name)

    opt.MouseButton1Click:Connect(function()
        if name == "All" then
            -- Toggle All selection
            local newState = not selectedEvents["All"]
            
            -- Select/deselect all events
            for _, evt in ipairs(EVENT_LIST_DISPLAY) do
                selectedEvents[evt] = newState
                if optButtons[evt] then
                    setOptVisual(optButtons[evt], evt)
                end
            end
        else
            -- Toggle individual event
            selectedEvents[name] = not selectedEvents[name]
            setOptVisual(opt, name)
            
            -- Update "All" checkbox
            updateAllSelection()
            if optButtons["All"] then
                setOptVisual(optButtons["All"], "All")
            end
        end

        refreshDropdownText()
    end)
    
    opt.MouseEnter:Connect(function()
        opt.BackgroundColor3 = Color3.fromRGB(44, 44, 60)
    end)
    opt.MouseLeave:Connect(function()
        setOptVisual(opt, name)
    end)
end

ddButton.MouseButton1Click:Connect(function()
    listFrame.Visible = not listFrame.Visible
end)

local evBtns = Instance.new("Frame")
evBtns.BackgroundTransparency = 1
evBtns.Size = UDim2.new(1, 0, 1, -52)
evBtns.Position = UDim2.new(0, 0, 0, 52)
evBtns.Parent = pageEvents
evBtns.ZIndex = 640

local evList = Instance.new("UIListLayout")
evList.Padding = UDim.new(0, 12)
evList.Parent = evBtns

local btnExecSelected = makeButton(evBtns, "‚ö° Execute The Selected Event", 650)
btnExecSelected.Size = UDim2.new(1, 0, 0, 44)

local btnExecAll = makeButton(evBtns, "üå© Execute All Event", 650)
btnExecAll.Size = UDim2.new(1, 0, 0, 44)

--=========================
-- MISC TAB
--=========================
local miscCard = Instance.new("Frame")
miscCard.BackgroundColor3 = CFG.Card
miscCard.Size = UDim2.new(1, 0, 1, 0)
miscCard.Parent = pageMisc
miscCard.ZIndex = 640
round(miscCard, 14)
stroke(miscCard, 1, 0.90)
padding(miscCard, 12, 12, 12, 12)

local miscBtns = Instance.new("Frame")
miscBtns.BackgroundTransparency = 1
miscBtns.Size = UDim2.new(1, 0, 0, 104)
miscBtns.Parent = miscCard
miscBtns.ZIndex = 650

local miscList = Instance.new("UIListLayout")
miscList.Padding = UDim.new(0, 12)
miscList.Parent = miscBtns

local btnFixLag = makeButton(miscBtns, "üßπ Fix lag", 660)
btnFixLag.Size = UDim2.new(1, 0, 0, 44)

local btnXray = makeButton(miscBtns, "üëÅ X-ray base", 660)
btnXray.Size = UDim2.new(1, 0, 0, 44)

--=========================
-- Open / Close - NO ANIMATION
--=========================
local isOpen = false

toggle.MouseButton1Click:Connect(function()
    isOpen = not isOpen
    main.Visible = isOpen
end)

closeBtn.MouseButton1Click:Connect(function()
    isOpen = false
    main.Visible = false
    if listFrame then listFrame.Visible = false end
end)

-- Default tab
activateTab(tabMain, pageMain)
tabMain.MouseButton1Click:Connect(function() activateTab(tabMain, pageMain) end)
tabEvents.MouseButton1Click:Connect(function() activateTab(tabEvents, pageEvents) end)
tabMisc.MouseButton1Click:Connect(function() activateTab(tabMisc, pageMisc) end)

--=========================
-- BUTTON CALLBACKS WITH REMOTE FUNCTIONS AND SCRIPT LOADERS
--=========================

-- Main Tab Buttons with Script Loaders
btnBrainrotSpawner.MouseButton1Click:Connect(function()
    local success, err = pcall(function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/NoobRbl/Test/refs/heads/main/Brainrot%20Spawner"))()
    end)
end)

-- Rainy Lucky Block (ƒë√£ c·∫≠p nh·∫≠t t√™n v√† l·ªánh)
btnLuckyBlock.MouseButton1Click:Connect(function()
    local success, err = pcall(function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/NoobRbl/Test/refs/heads/main/Editor"))()
    end)
end)

btnAddBrainrot.MouseButton1Click:Connect(function()
    local success, err = pcall(function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/NoobRbl/Test/refs/heads/main/Addbrainrot"))()
    end)
end)

-- Admin's Luck (ƒë√£ c·∫≠p nh·∫≠t t√™n v√† l·ªánh)
btnStealer.MouseButton1Click:Connect(function()
    local success, err = pcall(function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/NoobRbl/Test/refs/heads/main/Lucky"))()
    end)
end)

btnAutoMoreira.MouseButton1Click:Connect(function()
    local success, err = pcall(function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/NoobRbl/Test/refs/heads/main/Auto%20Moreira%20Method"))()
    end)
end)

btnDuplicate.MouseButton1Click:Connect(function()
    local success, err = pcall(function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/NoobRbl/Test/refs/heads/main/D"))()
    end)
end)

-- Event Tab Buttons with Remote Calls
btnExecSelected.MouseButton1Click:Connect(function()
    -- Get all selected events except "All"
    local eventsToExecute = {}
    for evName, isSelected in pairs(selectedEvents) do
        if isSelected and evName ~= "All" then
            table.insert(eventsToExecute, evName)
        end
    end
    
    if #eventsToExecute == 0 then
        return
    end
    
    -- Execute each selected event with error handling
    for _, eventName in ipairs(eventsToExecute) do
        local args = {
            [1] = eventName
        }
        
        local success, result = pcall(function()
            local remote = RS.Packages.Net:FindFirstChild("RF/AdminService/StartEvent")
            if remote then
                return remote:InvokeServer(unpack(args))
            else
                error("Remote not found: RF/AdminService/StartEvent")
            end
        end)
        
        -- Small delay between events to avoid rate limiting
        task.wait(0.1)
    end
end)

btnExecAll.MouseButton1Click:Connect(function()
    -- Execute all events t·ª´ danh s√°ch ƒë√£ x√°c ƒë·ªãnh
    for _, eventName in ipairs(EVENT_LIST_EXECUTE_ALL) do
        local args = {
            [1] = eventName
        }
        
        local success, result = pcall(function()
            local remote = RS.Packages.Net:FindFirstChild("RF/AdminService/StartEvent")
            if remote then
                return remote:InvokeServer(unpack(args))
            else
                error("Remote not found: RF/AdminService/StartEvent")
            end
        end)
        
        -- Small delay between events to avoid rate limiting
        task.wait(0.1)
    end
end)

-- Misc Tab Buttons (CH·ªà S·ª¨ D·ª§NG GITHUB)
btnFixLag.MouseButton1Click:Connect(function()
    -- S·ª≠ d·ª•ng script t·ª´ GitHub
    local success, err = pcall(function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/NoobRbl/Test/refs/heads/main/FixLag"))()
    end)
end)

btnXray.MouseButton1Click:Connect(function()
    -- S·ª≠ d·ª•ng script t·ª´ GitHub cho X-ray
    local success, err = pcall(function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/NoobRbl/Test/refs/heads/main/XR"))()
    end)
end)

-- Simple hover for close button
closeBtn.MouseEnter:Connect(function()
    closeBtn.BackgroundColor3 = Color3.fromRGB(50, 50, 65)
end)
closeBtn.MouseLeave:Connect(function()
    closeBtn.BackgroundColor3 = Color3.fromRGB(40, 40, 52)
end)
